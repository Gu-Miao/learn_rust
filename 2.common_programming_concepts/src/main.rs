// 1. å¸¸é‡ä½¿ç”¨ const å…³é”®å­—å£°æ˜ï¼Œä¸”å¿…é¡»æ˜¾å¼æ ‡æ³¨ç±»å‹
// 2. å¸¸é‡æ°¸è¿œä¸å¯å˜ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ mut
// 3. å¸¸é‡å¯ä»¥å£°æ˜åœ¨ä»»æ„ä½œç”¨åŸŸï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸ
// 4. å¸¸é‡å¿…é¡»ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½ç»‘å®šåˆ°å‡½æ•°çš„è°ƒç”¨ç»“æœæˆ–è€…è¿è¡Œæ—¶æ‰èƒ½è®¡ç®—å‡ºçš„å€¼
// 5. ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œå¸¸é‡ä¸€ç›´æœ‰æ•ˆ
// 6. å¸¸é‡ä½¿ç”¨å…¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€
const _SOME_CONSTANT: u32 = 100_000; // æ•°å­—å¯ä»¥æ’å…¥ä¸‹åˆ’çº¿å¢å¼ºå¯è¯»æ€§

fn main() {
  // let é»˜è®¤ä¸å¯å˜ï¼Œå£°æ˜å¯å˜éœ€è¦ç”¨ let mut
  // å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º x æ˜¯ä¸å¯å˜çš„
  // let x = 1;
  // x = 2;

  // Shaowing (éšè—)
  // å¯ä»¥ä½¿ç”¨ç›¸åŒåç§°å£°æ˜æ–°å˜é‡ï¼Œæ–°çš„å˜é‡å°±ä¼š shadow (éšè—) ä¹‹å‰å£°æ˜çš„å˜é‡
  // Shadow å’ŒæŠŠå˜é‡æ ‡è®°ä¸º mut ä¸åŒï¼š
  // 1. ä¸ä½¿ç”¨ mut å…³é”®å­—ï¼Œé‡æ–°ç»™é mut å˜é‡èµ‹å€¼ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯
  // 2. ä½¿ç”¨ Shadowing å£°æ˜çš„åŒåå˜é‡ä¹Ÿæ˜¯ä¸å¯å˜çš„
  // 3. ä½¿ç”¨ Shadowing å£°æ˜çš„æ–°å˜é‡çš„ç±»å‹å¯ä»¥ä¸ä¹‹å‰ä¸åŒ
  let spaces = "    ";
  let spaces = spaces.len();
  println!("spaces is {}", spaces);

  // Rust æ˜¯é™æ€ç¼–ç¨‹è¯­è¨€ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹
  // åŸºäºä½¿ç”¨çš„å€¼ï¼Œç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ¨æ–­å‡ºå®ƒçš„å…·ä½“ç±»å‹
  // ä½†æ˜¯å¦‚æœå¯èƒ½çš„ç±»å‹æ¯”è¾ƒå¤šï¼Œå°±å¿…é¡»æ˜¾å¼åœ°æŒ‡æ˜ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™

  // ä¸‹é¢è¿™æ®µä»£ç ï¼Œå¦‚æœä½ å°† `: i32` åˆ æ‰ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸º Rust ä¸­æœ‰å¾ˆå¤šç§ç±»å‹
  // å¯ä»¥è¡¨ç¤º 3 è¿™ä¸ªæ•´æ•°ï¼Œæ¯”å¦‚ i32, u32 ç­‰ï¼Œå› æ­¤è¿™æ—¶å°±éœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹
  let _three: i32 = "3".trim().parse().expect("Error!");

  // æ ‡é‡ç±»å‹
  // 4 ç§æ ‡é‡ç±»å‹ï¼šæ•´æ•°ç±»å‹ã€æµ®ç‚¹ç±»å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹

  // æ•´æ•°ç±»å‹
  // æœ‰ç¬¦å· i å¼€å¤´ï¼Œæ— ç¬¦å· u å¼€å¤´ï¼Œæ— ç¬¦å·æ•´æ•°éƒ½æ˜¯éè´Ÿçš„
  // -----------------------------
  //  length  | Signed | UnSigned
  // -----------------------------
  //  8-bit   | i8     | u8
  // -----------------------------
  //  16-bit  | i16    | u16
  // -----------------------------
  //  32-bit  | i32    | u32
  // -----------------------------
  //  64-bit  | i64    | u64
  // -----------------------------
  //  128-bit | i128   | u128
  // -----------------------------
  //  arch    | isize  | usize
  // -----------------------------
  // æœ‰ç¬¦å·å–å€¼èŒƒå›´ï¼š[-(2^n-1), 2^(n-1)-1]ï¼Œæ— ç¬¦å·å–å€¼èŒƒå›´ï¼š[0, 2^n-1]
  // arch å³ architectureï¼Œè¡¨ç¤ºç³»ç»Ÿæ¶æ„ã€‚æ¯”å¦‚ 64 ä½è®¡ç®—æœº isize å°±æ˜¯ i64, usize å°±æ˜¯

  // æ•´æ•°å­—é¢å€¼
  // --------------------------------
  //  Numbers literals | Example
  // --------------------------------
  //  Decimal          | 98_222
  // --------------------------------
  //  Hex              | 0xff
  // --------------------------------
  //  Octal            | 0o77
  // --------------------------------
  //  Binary           | 0b1111_0000
  // --------------------------------
  //  Byte (u8 only)   | b'A'
  // --------------------------------
  // é™¤äº† Byte ç±»å‹å¤–ï¼Œæ‰€æœ‰çš„æ•´æ•°å­—é¢å€¼éƒ½å¯ä»¥åŠ ç±»å‹åç¼€æ¯”å¦‚ 57u8
  // å¯ä»¥ä½¿ç”¨é»˜è®¤ç±»å‹ i32ï¼Œæ€»ä½“ä¸Š i32 é€Ÿåº¦å¾ˆå¿«ï¼Œå³ä½¿æ˜¯åœ¨ 64 ä½ç³»ç»Ÿä¸­

  // æ•´æ•°æº¢å‡º
  // u8 çš„èŒƒå›´ä¸º [0, 255]ï¼Œå¦‚æœæŠŠä¸€ä¸ª u8 ç±»å‹çš„å˜è„¸è®¾ä¸º 256ï¼Œé‚£ä¹ˆï¼š
  // è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œç¨‹åºä¼š panic
  // å‘å¸ƒæ¨¡å¼ä¸‹ï¼ŒRust ä¸ä¼šæ£€æŸ¥æ•´æ•°æº¢å‡ºï¼Œå¦‚æœæº¢å‡ºå‘ç”Ÿï¼ŒRust ä¼šæ‰§è¡Œâ€œç¯ç»•â€æ“
  // ä½œï¼š256->0,257->1...ï¼Œä¸”ç¨‹åºä¸ä¼š panic

  // æµ®ç‚¹ç±»å‹
  // æµ®ç‚¹ç±»å‹å…±æœ‰ä¸¤ç§ f32ï¼Œ32 ä½å•ç²¾åº¦ï¼Œf64ï¼Œ64 ä½åŒç²¾åº¦
  // Rust ä½¿ç”¨ IEEE-754 æ ‡å‡†æ¥è¡¨è¿°
  // é»˜è®¤ä¸º f64 ç±»å‹

  // åŸºæœ¬è¿ç®—
  // åŠ å‡ä¹˜é™¤ä½™
  let _sum = 5 + 10;
  let _difference = 95.5 - 4.3;
  let _product = 4 * 30;
  let _quotient = 56.7 / 32.2;
  let _reminder = 54 % 5;

  // å¯ä»¥æœ‰ x+=1; ä½†æ²¡æœ‰ x++;
  let mut _some_number = 1;
  _some_number += 1;
  // _some_number++; // æŠ¥é”™

  // å¸ƒå°”ç±»å‹
  // ç¬¦å·ä¸º boolï¼Œä¸€ä¸ªå­—èŠ‚å¤§å°

  // å­—ç¬¦ç±»å‹
  // char ç±»å‹è¢«ç”¨äºæè¿°è¯­è¨€ä¸­æœ€åŸºç¡€çš„å•ä¸ªå­—ç¬¦
  // å­—ç¬¦ç±»å‹ä½¿ç”¨å•å¼•å·
  // å  4 ä¸ªå­—èŠ‚å¤§å°
  // æ˜¯ Unicode æ ‡é‡å€¼ï¼Œå¯ä»¥è¡¨ç¤ºæ¯” ASCII å¤šå¾—å¤šçš„å†…å®¹ï¼šæ‹¼éŸ³ã€ä¸­æ—¥éŸ©æ–‡ã€é›¶é•¿
  // åº¦ç©ºç™½å­—ç¬¦ã€emoji è¡¨æƒ…ç­‰ã€‚èŒƒå›´ä¸º [U+0000, U+D7FF] å’Œ [U+E000, U+10FFF]
  let _c = 'z';
  let _z: char = 'â„¤';
  let _heart_eyed_cat = 'ğŸ˜»';

  // å¤åˆç±»å‹
  // å¤åˆç±»å‹å¯ä»¥å°†å¤šä¸ªå€¼æ”¾åœ¨ä¸€ä¸ªç±»å‹ä¸­
  // Rust æä¾›äº†ä¸¤ç§åŸºç¡€çš„å¤åˆç±»å‹ï¼šå…ƒç»„å’Œæ•°ç»„

  // å…ƒç»„ (Tuple)
  // å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸€æ—¦å£°æ˜å°±ä¸èƒ½æ›´æ”¹
  // å…ƒç»„ä¸­çš„æ¯ä¸ªä½ç½®éƒ½å¯¹åº”ä¸€ä¸ªç±»å‹ï¼Œå„å…ƒç´ ç±»å‹ä¸å¿…ç›¸åŒ
  let tup: (i32, char, bool) = (1, 'a', true);

  // ä½¿ç”¨ç‚¹æ ‡è®°æ³•å’Œç´¢å¼•æ¥è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ 
  println!("elements in tup are {}, {}, {}", tup.0, tup.1, tup.2);

  // æ•°ç»„
  // æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„
  // æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒ
  // æ•°ç»„ç±»å‹ä½¿ç”¨ [ç±»å‹; é•¿åº¦] è¡¨ç¤º
  let _arr: [i32; 5] = [1, 2, 3, 4, 5];
  // å¦‚æœæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å£°æ˜ï¼š
  let arr1 = [3; 5];
  // è¿™ä¸ let arr1 = [3, 3, 3, 3, 3]; ç­‰ä»·

  // ä½¿ç”¨ä¸­æ‹¬å·å’Œç´¢å¼•æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ 
  println!("first elemnt in arr1 is {}", arr1[0]);

  // å¦‚æœè®¿é—®çš„ç´¢å¼•è¶…å‡ºäº†èŒƒå›´ï¼Œé‚£ä¹ˆç¼–è¯‘ä¼šæŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶ç¨‹åºä¼š panic

  // å‡½æ•°
  // ä½¿ç”¨ fn å…³é”®å­—å£°æ˜å‡½æ•°ï¼Œå‡½æ•°åéµå¾ª snake case è§„èŒƒ
  // å‚æ•°ç±»å‹å¿…é¡»æ˜¾å¼åœ°æŒ‡æ˜
  fn _sum_fn(_x: i32, _y: i32) {
    // ...
  }

  // å‡½æ•°ä½“ä¸­çš„è¯­å¥ä¸è¡¨è¾¾å¼
  // å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œå¯é€‰çš„ç”±ä¸€ä¸ªè¡¨è¾¾å¼ç»“æŸ
  // Rust æ˜¯ä¸€ä¸ªåŸºäºè¡¨è¾¾å¼çš„è¯­è¨€
  // è¯­å¥æ˜¯æ‰§è¡Œä¸€äº›åŠ¨ä½œçš„æŒ‡ä»¤
  // è¡¨è¾¾å¼ä¼šäº§ç”Ÿä¸€ä¸ªå€¼
  // å˜é‡å£°æ˜ï¼Œå‡½æ•°å£°æ˜éƒ½æ˜¯è¯­å¥
  // è¯­å¥ä¸è¿”å›å€¼ï¼Œä¸èƒ½ä½¿ç”¨ let å°†è¯­å¥èµ‹å€¼ç»™å˜é‡

  // ä¸‹é¢è¿™è¡Œä¼šæŠ¥é”™
  // let _x = (let y = 1);

  // å—è¡¨è¾¾å¼çš„å€¼ä¸ºæœ€åä¸€è¡Œè¡¨è¾¾å¼çš„å€¼
  let _y = {
    let x = 1;
    x + 5 // å¦‚æœè¿™é‡ŒåŠ ä¸Š ;ï¼Œé‚£ä¹ˆå®ƒå°±å˜ä¸ºäº†è¯­å¥ï¼Œ_y çš„ç±»å‹å˜ä¸ºç©ºå…ƒç»„ ()
  };

  // å‡½æ•°è¿”å›å€¼
  // å¯ä»¥ä½¿ç”¨ -> ä¸ºè¿”å›å€¼å£°æ˜ç±»å‹
  // è¿”å›å€¼æ˜¯å‡½æ•°ä½“ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼
  // å¯ä»¥ä½¿ç”¨ return å…³é”®å­—æå‰è¿”å›
  fn _plus_5(x: i32) -> i32 {
    if x == 0 {
      return 5;
    }
    x + 5
  }

  // if è¡¨è¾¾å¼
  // if è¡¨è¾¾å¼ä¸­çš„æ¡ä»¶å¿…é¡»æ˜¯ bool ç±»å‹
  // å¯ä»¥ä½¿ç”¨ if è¡¨è¾¾å¼èµ‹å€¼ï¼Œä½†æ˜¯æ¯ä¸ªåˆ†æ”¯è¿”å›çš„ç±»å‹å¿…é¡»ç›¸åŒ
  let _if_var = if 5 > 1 { 66 } else { 77 };

  // loop å¾ªç¯
  // loop ä¸­å¯ä»¥ä½¿ç”¨ continue, breakï¼Œå°±å’Œå…¶ä»–è¯­è¨€ä¸€æ ·
  // break åé¢å¦‚æœè·Ÿç€è¡¨è¾¾å¼ï¼Œå°±å°†å…¶è§†ä¸º loop å¾ªç¯è¿”å›çš„å€¼ï¼Œç”±æ­¤å¯ä»¥çœ‹å‡º loop å¾ªç¯
  // ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
  let mut loop_count: i32 = 0;
  let _loop_var: i32 = loop {
    loop_count += 1;
    if loop_count == 10 {
      break loop_count * 5;
    }
  };

  // while å¾ªç¯
  // while å¾ªç¯ä¸èƒ½ä½¿ç”¨ break è·Ÿè¡¨è¾¾å¼çš„è¯­æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™
  // while å¾ªç¯ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œè¿”å›ç©ºå…ƒç»„ ()
  let mut while_condition = 10;
  let _while_loop_value = while while_condition > 0 {
    while_condition -= 2;
  };

  // for å¾ªç¯
  // ä¸€èˆ¬ç”¨äºéå†é›†åˆ
  let for_loop_arr = [1, 2, 3, 4, 5];
  for element in for_loop_arr.iter() {
    println!("element is {}", element); // 1 2 3 4 5
  }

  // Range
  // æ ‡å‡†åº“æä¾›
  // æŒ‡å®šå¼€å§‹æ•°å­—å’Œç»“æŸæ•°å­—ï¼ŒRange å¯ä»¥ç”Ÿæˆå®ƒä»¬ä¹‹é—´çš„æ•°å­—ï¼Œå·¦é—­å³å¼€åŒºé—´
  // rev() æ–¹æ³•å¯ä»¥åè½¬
  for number in (0..5).rev() {
    println!("number is {}", number); // 4 3 2 1 0
  }
}
